

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>States &mdash; PsyNeuLink 0.1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="PsyNeuLink 0.1 documentation" href="index.html"/>
        <link rel="next" title="Input State" href="InputState.html"/>
        <link rel="prev" title="Control Mechanisms" href="ControlMechanism.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> PsyNeuLink
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul>
<li class="toctree-l1"><a class="reference internal" href="System.html">System</a></li>
<li class="toctree-l1"><a class="reference internal" href="Process.html">Process</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Mechanism.html">Mechanisms</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">States</a><ul>
<li class="toctree-l2"><a class="reference internal" href="InputState.html">Input State</a></li>
<li class="toctree-l2"><a class="reference internal" href="ParameterState.html">Parameter State</a></li>
<li class="toctree-l2"><a class="reference internal" href="OutputState.html">Output State</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Projection.html">Projections</a></li>
<li class="toctree-l1"><a class="reference internal" href="Utilities.html">Utilities</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">PsyNeuLink</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>States</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/State.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="states">
<h1>States<a class="headerlink" href="#states" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="InputState.html">Input State</a><ul>
<li class="toctree-l2"><a class="reference internal" href="InputState.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="InputState.html#creating-an-inputstate">Creating an InputState</a></li>
<li class="toctree-l2"><a class="reference internal" href="InputState.html#function">Function</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ParameterState.html">Parameter State</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ParameterState.html#overview">Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="OutputState.html">Output State</a><ul>
<li class="toctree-l2"><a class="reference internal" href="OutputState.html#creating-an-outputstate">Creating an OutputState</a></li>
</ul>
</li>
</ul>
</div>
<span class="target" id="module-State"></span><dl class="class">
<dt id="State.State_Base">
<em class="property">class </em><code class="descclassname">State.</code><code class="descname">State_Base</code><span class="sig-paren">(</span><em>owner</em>, <em>value=NotImplemented</em>, <em>params=NotImplemented</em>, <em>name=None</em>, <em>prefs=None</em>, <em>context=None</em>, <em>**kargs</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base" title="Permalink to this definition">¶</a></dt>
<dd><p>Implement abstract class for State category of class types that compute and represent mechanism states</p>
<dl class="docutils">
<dt>Description:</dt>
<dd><dl class="first last docutils">
<dt>Represents and updates the state of an input, output or parameter of a mechanism</dt>
<dd><ul class="first last">
<li><p class="first">receives inputs from projections (self.receivesFromProjections, STATE_PROJECTIONS)</p>
</li>
<li><dl class="first docutils">
<dt>combines inputs from all projections (mapping and/or control) and uses this as variable of</dt>
<dd><p class="first last">function to update the value attribute</p>
</dd>
</dl>
</li>
</ul>
</dd>
<dt>Value attribute:</dt>
<dd><ul class="first last simple">
<li>is updated by the execute method (which calls state&#8217;s function)</li>
<li>can be used as sender (input) to one or more projections</li>
<li>can be accessed by KVO</li>
</ul>
</dd>
<dt>Constraints:</dt>
<dd><ul class="first last simple">
<li>value must be compatible with variable of function</li>
<li>value must be compatible with receiver.value for all projections it receives</li>
</ul>
</dd>
</dl>
</dd>
<dt>Subclasses:</dt>
<dd><dl class="first last docutils">
<dt>Must implement:</dt>
<dd><p class="first">functionType
ParamClassDefaults with:</p>
<blockquote class="last">
<div><ul class="simple">
<li>FUNCTION (or &lt;subclass&gt;.function</li>
<li>FUNCTION_PARAMS (optional)</li>
<li>PROJECTION_TYPE - specifies type of projection to use for instantiation of default subclass</li>
</ul>
</div></blockquote>
</dd>
<dt>Standard subclasses and constraints:</dt>
<dd><dl class="first last docutils">
<dt>InputState - used as input state for Mechanism;  additional constraint:</dt>
<dd><ul class="first last simple">
<li>value must be compatible with variable of owner&#8217;s function method</li>
</ul>
</dd>
<dt>OutputState - used as output state for Mechanism;  additional constraint:</dt>
<dd><ul class="first last simple">
<li>value must be compatible with the output of the owner&#8217;s function</li>
</ul>
</dd>
<dt>MechanismsParameterState - used as state for Mechanism parameter;  additional constraint:</dt>
<dd><ul class="first last simple">
<li>output of function must be compatible with the parameter&#8217;s value</li>
</ul>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt>Instantiation:</dt>
<dd><dl class="first last docutils">
<dt>States should NEVER be instantiated by a direct call to the class</dt>
<dd>(since there is no obvious default), but rather by calls to the subclass</dd>
<dt>Subclasses can be instantiated in one of two ways:</dt>
<dd><ul class="first last simple">
<li>call to __init__ with args to subclass with args for owner, value and params:</li>
<li>as part of the instantiation of a Mechanism (see Mechanism.intantiate_mechanism_state for details)</li>
</ul>
</dd>
</dl>
</dd>
<dt>Initialization arguments:</dt>
<dd><ul class="first last">
<li><p class="first">value (value) - establishes type of value attribute and initializes it (default: [0])</p>
</li>
<li><p class="first">owner(Mechanism) - assigns state to mechanism (default: NotImplemented)</p>
</li>
<li><dl class="first docutils">
<dt>params (dict):  (if absent, default state is implemented)</dt>
<dd><ul class="first last">
<li><p class="first">FUNCTION (method)         |  Implemented in subclasses; used in update_state()</p>
</li>
<li><p class="first">FUNCTION_PARAMS (dict) |</p>
</li>
<li><dl class="first docutils">
<dt>STATE_PROJECTIONS:&lt;projection specification or list of ones&gt;</dt>
<dd><p class="first">if absent, no projections will be created
projection specification can be: (see Projection for details)</p>
<blockquote class="last">
<div><ul class="simple">
<li>Projection object</li>
<li>Projection class</li>
<li>specification dict</li>
<li>a list containing any or all of the above</li>
</ul>
<dl class="docutils">
<dt>if dict, must contain entries specifying a projection:</dt>
<dd><ul class="first last simple">
<li>PROJECTION_TYPE:&lt;Projection class&gt;: must be a subclass of Projection</li>
<li>PROJECTION_PARAMS:&lt;dict&gt;? - must be dict of params for PROJECTION_TYPE</li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>name (str): if it is not specified, a default based on the class is assigned in register_category,</dt>
<dd><p class="first last">of the form: className+n where n is the n&#8217;th instantiation of the class</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>prefs (PreferenceSet or specification dict):</dt>
<dd><p class="first last">if it is omitted, a PreferenceSet will be constructed using the classPreferences for the subclass
dict entries must have a preference keyPath as their key, and a PreferenceEntry or setting as their value
(see Description under PreferenceSet for details)</p>
</dd>
</dl>
</li>
<li><p class="first">context (str): must be a reference to a subclass, or an exception will be raised</p>
</li>
</ul>
</dd>
<dt>StateRegistry:</dt>
<dd><p class="first">Used by .__init__.py to assign default projection types to each state subclass
Note:
* All states that belong to a given owner are registered in the owner&#8217;s _stateRegistry,</p>
<blockquote class="last">
<div><p>which maintains a dict for each state type that it uses, a count for all instances of that type,
and a dictionary of those instances;  NONE of these are registered in the StateRegistry
This is so that the same name can be used for instances of a state type by different owners</p>
<blockquote>
<div>without adding index suffixes for that name across owners,
while still indexing multiple uses of the same base name within an owner</div></blockquote>
</div></blockquote>
</dd>
<dt>Naming:</dt>
<dd>States can be named explicitly (using the name=&#8217;&lt;name&gt;&#8217; argument).  If the argument is omitted,
it will be assigned the subclass name with a hyphenated, indexed suffix (&#8216;subclass.name-n&#8217;)</dd>
</dl>
<p>Execution:</p>
<dl class="docutils">
<dt>Class attributes:</dt>
<dd><ul class="first last">
<li><p class="first">functionCategory = kwStateFunctionCategory</p>
</li>
<li><p class="first">className = kwState</p>
</li>
<li><p class="first">suffix</p>
</li>
<li><p class="first">classPreference (PreferenceSet): StatePreferenceSet, instantiated in __init__()</p>
</li>
<li><p class="first">classPreferenceLevel (PreferenceLevel): PreferenceLevel.CATEGORY</p>
</li>
<li><p class="first">variableClassDefault (value): [0]</p>
</li>
<li><dl class="first docutils">
<dt>requiredParamClassDefaultTypes = {FUNCTION_PARAMS</dt>
 <span class="classifier-delimiter">:</span> <span class="classifier">[dict],    # Subclass function params</span><dd><p class="first last">PROJECTION_TYPE: [str, Projection]})   # Default projection type</p>
</dd>
</dl>
</li>
<li><p class="first">paramClassDefaults (dict): {STATE_PROJECTIONS: []}             # Projections to States</p>
</li>
<li><p class="first">paramNames (dict)</p>
</li>
<li><p class="first">owner (Mechansim)</p>
</li>
<li><p class="first">FUNCTION (Function class or object, or method)</p>
</li>
</ul>
</dd>
<dt>Class methods:</dt>
<dd><dl class="first last docutils">
<dt>-&nbsp;set_value(value) -</dt>
<dd>validates and assigns value, and updates observers
returns None</dd>
<dt>-&nbsp;update_state(context) -</dt>
<dd>updates self.value by combining all projections and using them to compute new value
return None</dd>
</dl>
</dd>
<dt>Instance attributes:</dt>
<dd><ul class="first last simple">
<li>owner (Mechanism): object to which State belongs</li>
<li>value (value): current value of the State (updated by update_state method)</li>
<li>baseValue (value): value with which it was initialized (e.g., from params in call to __init__)</li>
<li>receivesFromProjections (list): list of projections for which State is a receiver</li>
<li>sendsToProjections (list): list of projections for which State is a sender</li>
<li>params (dict)</li>
<li>value (value - output of function</li>
<li>name (str) - if it is not specified as an arg, a default based on the class is assigned in register_category</li>
<li>prefs (PreferenceSet) - if not specified as an arg, default is created by copying StatePreferenceSet</li>
</ul>
</dd>
<dt>Instance methods:</dt>
<dd>none</dd>
</dl>
<dl class="method">
<dt id="State.State_Base.check_projection_receiver">
<code class="descname">check_projection_receiver</code><span class="sig-paren">(</span><em>projection_spec</em>, <em>messages=NotImplemented</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base.check_projection_receiver" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether Projection object references State as receiver and, if not, return default Projection object</p>
<p>Arguments:
- projection_spec (Projection object)
- message (list): list of three strings - prefix and suffix for error/warning message, and State name
- context (object): ref to State object; used to identify PROJECTION_TYPE and name</p>
<p>Returns: tuple (Projection object, str); second value is name of default projection, else None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> &#8211; </li>
<li><strong>projection_spec</strong> &#8211; (Projection object)</li>
<li><strong>messages</strong> &#8211; (list)</li>
<li><strong>context</strong> &#8211; (State object)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(tuple) Projection object, str) - second value is false if default was returned</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="State.State_Base.check_projection_sender">
<code class="descname">check_projection_sender</code><span class="sig-paren">(</span><em>projection_spec</em>, <em>receiver</em>, <em>messages=NotImplemented</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base.check_projection_sender" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether Projection object references State as sender and, if not, return default Projection object</p>
<p>Arguments:
- projection_spec (Projection object)
- message (list): list of three strings - prefix and suffix for error/warning message, and State name
- context (object): ref to State object; used to identify PROJECTION_TYPE and name</p>
<p>Returns: tuple (Projection object, str); second value is name of default projection, else None</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>self</strong> &#8211; </li>
<li><strong>projection_spec</strong> &#8211; (Projection object)</li>
<li><strong>messages</strong> &#8211; (list)</li>
<li><strong>context</strong> &#8211; (State object)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(tuple) Projection object, str) - second value is false if default was returned</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="State.State_Base.instantiate_projection_from_state">
<code class="descname">instantiate_projection_from_state</code><span class="sig-paren">(</span><em>projection_spec</em>, <em>receiver</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base.instantiate_projection_from_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate projection from a state and assign it to self.sendsToProjections</p>
<p>Check that projection_spec is one of the following:
+ Projection class (or keyword string constant for one):</p>
<blockquote>
<div>implements default projection for projection class</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>Projection object:</dt>
<dd><p class="first last">checks that sender is self
checks that self.value is compatible with projection&#8217;s function variable</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>specification dict:</dt>
<dd><p class="first">checks that self.value is compatiable with projection&#8217;s function variable
implements projection
dict must contain:</p>
<blockquote class="last">
<div><ul class="simple">
<li>PROJECTION_TYPE:&lt;Projection class&gt; - must be a subclass of Projection</li>
<li>PROJECTION_PARAMS:&lt;dict&gt; - must be dict of params for PROJECTION_TYPE</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
<dl class="docutils">
<dt>If any of the conditions above fail:</dt>
<dd>a default projection is instantiated using self.paramsCurrent[PROJECTION_TYPE]</dd>
</dl>
<p>Projection is added to self.sendsToProjections
If kwMStateProjections is absent or empty, no projections are created</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return state:</th><td class="field-body">(State)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="State.State_Base.instantiate_projections_to_state">
<code class="descname">instantiate_projections_to_state</code><span class="sig-paren">(</span><em>projections</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base.instantiate_projections_to_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate projections to a state and assign them to self.receivesFromProjections</p>
<p>For each projection spec in STATE_PROJECTIONS, check that it is one or a list of any of the following:
+ Projection class (or keyword string constant for one):</p>
<blockquote>
<div>implements default projection for projection class</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>Projection object:</dt>
<dd><p class="first last">checks that receiver is self
checks that projection function output is compatible with self.value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>specification dict:</dt>
<dd><p class="first">checks that projection function output is compatible with self.value
implements projection
dict must contain:</p>
<blockquote class="last">
<div><ul class="simple">
<li>PROJECTION_TYPE:&lt;Projection class&gt; - must be a subclass of Projection</li>
<li>PROJECTION_PARAMS:&lt;dict&gt; - must be dict of params for PROJECTION_TYPE</li>
</ul>
</div></blockquote>
</dd>
</dl>
</li>
</ul>
<dl class="docutils">
<dt>If any of the conditions above fail:</dt>
<dd>a default projection is instantiated using self.paramsCurrent[PROJECTION_TYPE]</dd>
</dl>
<p>Each projection in the list is added to self.receivesFromProjections
If kwMStateProjections is absent or empty, no projections are created</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return state:</th><td class="field-body">(State)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="State.State_Base.parse_projection_ref">
<code class="descname">parse_projection_ref</code><span class="sig-paren">(</span><em>projection_spec</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base.parse_projection_ref" title="Permalink to this definition">¶</a></dt>
<dd><p>Take projection ref and return ref to corresponding type or, if invalid, to  default for context</p>
<p>Arguments:
- projection_spec (Projection subclass or str):  str must be a keyword constant for a Projection subclass
- context (str):</p>
<p>Returns tuple: (Projection subclass or None, error string)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>projection_spec</strong> &#8211; (Projection subclass or str)</li>
<li><strong>messages</strong> &#8211; (list)</li>
<li><strong>context</strong> &#8211; (State object)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(Projection subclass, string)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="State.State_Base.update">
<code class="descname">update</code><span class="sig-paren">(</span><em>params=NotImplemented</em>, <em>time_scale=&lt;TimeScale.TRIAL: 1&gt;</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.State_Base.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update each projection, combine them, and assign result to value</p>
<blockquote>
<div>Call update for each projection in self.receivesFromProjections (passing specified params)
Note: only update LearningSignals if context == kwLearning; otherwise, just get their value
Call self.function (default: LinearCombination function) to combine their values
Assign result to self.value</div></blockquote>
<p>Arguments:
- context (str)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">None</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="State.check_parameter_state_value">
<code class="descclassname">State.</code><code class="descname">check_parameter_state_value</code><span class="sig-paren">(</span><em>owner</em>, <em>param_name</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#State.check_parameter_state_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that parameter value (&lt;ParameterState&gt;.value) is compatible with value in paramClassDefault</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>param_name</strong> &#8211; (str)</li>
<li><strong>value</strong> &#8211; (value)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(value)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="State.check_state_ownership">
<code class="descclassname">State.</code><code class="descname">check_state_ownership</code><span class="sig-paren">(</span><em>owner</em>, <em>param_name</em>, <em>mechanism_state</em><span class="sig-paren">)</span><a class="headerlink" href="#State.check_state_ownership" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether State&#8217;s owner is owner and if not offer options how to handle it</p>
<p>If State&#8217;s owner is not owner, options offered to:
- reassign it to owner
- make a copy and assign to owner
- return None =&gt; caller should assign default</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>param_name</strong> &#8211; (str)</li>
<li><strong>mechanism_state</strong> &#8211; (State)</li>
<li><strong>context</strong> &#8211; (str)</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">(State or None)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="State.instantiate_state">
<code class="descclassname">State.</code><code class="descname">instantiate_state</code><span class="sig-paren">(</span><em>owner</em>, <em>state_type</em>, <em>state_name</em>, <em>state_spec</em>, <em>state_params</em>, <em>constraint_value</em>, <em>constraint_value_name</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.instantiate_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate a State of specified type, with a value that is compatible with constraint_value</p>
<p>Constraint value must be a number or a list or tuple of numbers
(since it is used as the variable for instantiating the requested state)</p>
<p>If state_spec is a:
+ State class:</p>
<blockquote>
<div>implement default using constraint_value</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>State object:</dt>
<dd><p class="first last">check owner is owner (if not, user is given options in check_state_ownership)
check compatibility of value with constraint_value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Projection object:</dt>
<dd><p class="first last">assign constraint_value to value
assign projection to kwStateParams{STATE_PROJECTIONS:&lt;projection&gt;}</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Projection class (or keyword string constant for one):</dt>
<dd><p class="first last">assign constraint_value to value
assign projection class spec to kwStateParams{STATE_PROJECTIONS:&lt;projection&gt;}</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>specification dict for State (see XXX for context):</dt>
<dd><p class="first last">check compatibility of kwStateValue with constraint_value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>ParamValueProjection tuple: (only allowed for ParameterState spec)</dt>
<dd><dl class="first docutils">
<dt>assign ParamValueProjection.value to state_spec</dt>
<dd><dl class="first last docutils">
<dt>if it is a string:</dt>
<dd><p class="first last">test if it is a keyword and get its value by calling keyword method of owner&#8217;s execute method
otherwise, return None (suppress assignment of parameterState)</p>
</dd>
</dl>
</dd>
</dl>
<p class="last">assign ParamValueProjection.projection to kwStateParams{STATE_PROJECTIONS:&lt;projection&gt;}</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>2-item tuple: (only allowed for ParameterState spec)</dt>
<dd><dl class="first docutils">
<dt>assign first item to state_spec</dt>
<dd><dl class="first last docutils">
<dt>if it is a string:</dt>
<dd><p class="first last">test if it is a keyword and get its value by calling keyword method of owner&#8217;s execute method
otherwise, return None (suppress assignment of parameterState)</p>
</dd>
</dl>
</dd>
</dl>
<p class="last">assign second item to kwStateParams{STATE_PROJECTIONS:&lt;projection&gt;}</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>value:</dt>
<dd><dl class="first docutils">
<dt>if it is a string:</dt>
<dd><p class="first last">test if it is a keyword and get its value by calling keyword method of owner&#8217;s execute method
otherwise, return None (suppress assignment of parameterState)</p>
</dd>
</dl>
<p class="last">check compatibility with constraint_value</p>
</dd>
</dl>
</li>
</ul>
<dl class="docutils">
<dt>If any of the conditions above fail:</dt>
<dd>a default State of specified type is instantiated using constraint_value as value</dd>
</dl>
<p>If state_params is specified, include with instantiation of state</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>context</strong> &#8211; (str)</td>
</tr>
<tr class="field-even field"><th class="field-name">Return state:</th><td class="field-body">(State)</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="State.instantiate_state_list">
<code class="descclassname">State.</code><code class="descname">instantiate_state_list</code><span class="sig-paren">(</span><em>owner</em>, <em>state_list</em>, <em>state_type</em>, <em>state_param_identifier</em>, <em>constraint_value</em>, <em>constraint_value_name</em>, <em>context=None</em><span class="sig-paren">)</span><a class="headerlink" href="#State.instantiate_state_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Instantiate and return an OrderedDictionary of States specified in state_list</p>
<p>Arguments:
- state_type (class): State class to be instantiated
- state_list (list): List of State specifications (generally from owner.paramsCurrent[kw&lt;State&gt;]),</p>
<blockquote>
<div>(state_spec, params_dict) tuple(s), or None
if None, instantiate a default using constraint_value as state_spec</div></blockquote>
<ul>
<li><dl class="first docutils">
<dt>state_param_identifier (str): kw used to identify set of states in params;  must be one of:</dt>
<dd><ul class="first last simple">
<li>kwInputState</li>
<li>kwOutputState</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>constraint_value (2D np.array): set of 1D np.ndarrays used as default values and</dt>
<dd><p class="first last">for compatibility testing in instantiation of state(s):
- kwInputState: self.variable
- kwOutputState: self.value
?? ** Note:
* this is ignored if param turns out to be a dict (entry value used instead)</p>
</dd>
</dl>
</li>
<li><p class="first">constraint_value_name (str):  passed to State.instantiate_state(), used in error messages</p>
</li>
<li><p class="first">context (str)</p>
</li>
</ul>
<dl class="docutils">
<dt>If state_list is None:</dt>
<dd><ul class="first last simple">
<li>instantiate a default State using constraint_value,</li>
<li>place as the single entry in the OrderedDict</li>
</ul>
</dd>
<dt>Otherwise, if state_list is:</dt>
<dd><ul class="first last">
<li><dl class="first docutils">
<dt>a single value:</dt>
<dd><p class="first last">instantiate it (if necessary) and place as the single entry in an OrderedDict</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>a list:</dt>
<dd><p class="first last">instantiate each item (if necessary) and place in an OrderedDict</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>an OrderedDict:</dt>
<dd><p class="first last">instantiate each entry value (if necessary)</p>
</dd>
</dl>
</li>
</ul>
</dd>
<dt>In each case, generate an OrderedDict with one or more entries, assigning:</dt>
<dd><dl class="first docutils">
<dt>the key for each entry the name of the outputState if provided,</dt>
<dd>otherwise, use kwMechanism&lt;state_type&gt;States-n (incrementing n for each additional entry)</dd>
</dl>
<p class="last">the state value for each entry to the corresponding item of the mechanism&#8217;s state_type state&#8217;s value
the dict to both self.&lt;state_type&gt;States and paramsCurrent[kwMechanism&lt;state_type&gt;States]
self.&lt;state_type&gt;State to self.&lt;state_type&gt;States[0] (the first entry of the dict)</p>
</dd>
</dl>
<p class="rubric">Notes</p>
<ul>
<li><dl class="first docutils">
<dt>if there is only one state, but the value of the mechanism&#8217;s state_type has more than one item:</dt>
<dd><p class="first last">assign it to the sole state, which is assumed to have a multi-item value</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>if there is more than one state:</dt>
<dd><p class="first last">the number of states must match length of mechanisms state_type value or an exception is raised</p>
</dd>
</dl>
</li>
</ul>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>state_type</strong> &#8211; </li>
<li><strong>state_param_identifier</strong> &#8211; </li>
<li><strong>constraint_value</strong> &#8211; </li>
<li><strong>constraint_value_name</strong> &#8211; </li>
<li><strong>context</strong> &#8211; </li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="State.random">
<code class="descclassname">State.</code><code class="descname">random</code><span class="sig-paren">(</span><span class="sig-paren">)</span> &rarr; x in the interval [0, 1).<a class="headerlink" href="#State.random" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="InputState.html" class="btn btn-neutral float-right" title="Input State" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ControlMechanism.html" class="btn btn-neutral" title="Control Mechanisms" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Jon Cohen.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>